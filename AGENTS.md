# AGENTS (root)

Короткие инструкции для работы в корне. Локальные AGENTS.md в подкаталогах дополняют или уточняют правила.

## TODO (глобальный список)

Если пользователь просит "выполнить следующую задачу", агент начинает с первого пункта ниже и идет по порядку.
Если в текущей директории есть локальный TODO, он имеет приоритет.

- [x] реализовать механику бесконечной генерации уровня (препятствия, дорога) в Steppy Scroller.
- [x] добавить условия проигрыша (столкновения с препятствиями) и систему набора очков (Score).
- [ ] заменить SVG-заглушки на качественные пиксель-арт ассеты.
- [ ] настроить GitHub Actions для автоматического запуска smoke-тестов после деплоя.

## Правила для агентов

- Новые решения по API/структуре фиксировать в ближайшем по пути AGENTS.md.
- При добавлении фичи — сначала сделать минимальный сценарий через game api, потом UI.
- Для изменений UI обязательно проверять консистентность state через API.
- После каждого коммита обязательно делать `git push`.
- Перед началом работы прогонять все доступные тесты, кроме тяжёлых e2e, завязанных на выкатки (Vercel/Devvit).
- Перед коммитом все тесты должны быть зелёные; тяжёлые e2e пропускаем только если явно оговорено. Можно оформить в git hook (pre-commit/pre-push) по договорённости.
- Если работа ведётся в ветке, перед пушем обязательно ребейз на свежий master и повторный прогон тестов.

## Как пользоваться инструкциями

- Читай AGENTS.md от корня к текущей директории: чем глубже файл, тем он приоритетнее.
- Пиши новые решения/правила в ближайший по пути AGENTS.md.
- Старые задачи и завершенные крупные пункты переносить в `docs/archive.md`.
- Идеи для новых игр хранить только в `docs/ideas/` (не использовать при реализации текущих игр).

## Где искать детали (по зонам)

- Game API контракт: `packages/game-api/AGENTS.md`.
- Общие инструкции для игр: `games/AGENTS.md`.
- Steppy Scroller (локальный пайплайн, тесты, URL, скриншоты): `games/steppy-scroller/AGENTS.md`.
- Devvit инструкции: `devvit/AGENTS.md`.
- Devvit Steppy Scroller (версия Devvit + выкатка): `devvit/steppy-scroller/AGENTS.md`.
- Devvit e2e/gif (UI клипы, OAuth при upload, дефолтный пост) — см. эти AGENTS.
- Общая разработка, структура, тестовая пирамида, логи: `docs/AGENTS.md`.
- Описания игр: `docs/games.md`.
- Идеи/концепции для новых игр (не использовать при реализации текущих игр): `docs/ideas/`.

## Текущий стек (кратко)

- TypeScript, Phaser 3, Vite, Vitest, Playwright, npm, Vercel.
